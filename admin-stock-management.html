<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Management - The Crust Admin</title>
    <link rel="stylesheet" href="admin-dashboard.css">
    <link rel="stylesheet" href="admin-stock-management.css">
</head>
<body>
    <div class="admin-container">
        <nav class="admin-nav">
            <h2>ğŸ• The Crust Admin</h2>
            <ul>
                <li><a href="admin-dashboard.html">ğŸ“Š Dashboard</a></li>
                <li><a href="admin-running-orders.html">ğŸ“‹ Running Orders</a></li>
                <li><a href="admin-sales.html">ğŸ’° Daily Sales</a></li>
                <li><a href="admin-menu.html">ğŸ“ Menu Management</a></li>
                <li><a href="admin-manual-order.html">ğŸ“ Manual Orders</a></li>
                <li><a href="admin-stock-management.html" class="active">ğŸ“¦ Stock Management</a></li>
            </ul>
        </nav>

        <main class="admin-main">
            <div class="admin-header">
                <h1>ğŸ“¦ Stock & Capacity Management</h1>
                <div class="header-actions">
                    <button id="save-settings-btn" class="btn-primary">ğŸ’¾ Save Settings</button>
                    <button id="reset-stock-btn" class="btn-secondary">ğŸ”„ Reset Daily Stock</button>
                </div>
            </div>

            <!-- Status Cards -->
            <div class="status-cards">
                <div class="status-card">
                    <div class="card-icon">ğŸ“Š</div>
                    <div class="card-content">
                        <h3>Total Items</h3>
                        <span id="total-items-count">Loading...</span>
                    </div>
                </div>
                <div class="status-card low-stock">
                    <div class="card-icon">âš ï¸</div>
                    <div class="card-content">
                        <h3>Low Stock Items</h3>
                        <span id="low-stock-count">Loading...</span>
                    </div>
                </div>
                <div class="status-card">
                    <div class="card-icon">â°</div>
                    <div class="card-content">
                        <h3>Available Time Slots</h3>
                        <span id="available-slots-count">Loading...</span>
                    </div>
                </div>
                <div class="status-card">
                    <div class="card-icon">ğŸ¯</div>
                    <div class="card-content">
                        <h3>Total Capacity</h3>
                        <span id="total-capacity-count">Loading...</span>
                    </div>
                </div>
                <div class="status-card dough-stock">
                    <div class="card-icon">ğŸ</div>
                    <div class="card-content">
                        <h3>Dough Remaining</h3>
                        <span id="dough-remaining-count">Loading...</span>
                    </div>
                </div>
            </div>

            <!-- Main Content Tabs -->
            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="stock">ğŸ“¦ Stock Levels</button>
                    <button class="tab-btn" data-tab="timeslots">â° Time Slots</button>
                    <button class="tab-btn" data-tab="settings">âš™ï¸ Settings</button>
                </div>

                <!-- Stock Management Tab -->
                <div id="stock-tab" class="tab-content active">
                    <div class="section-header">
                        <h2>ğŸ“¦ Daily Stock Management</h2>
                        <p>Set how many of each item you can make today</p>
                    </div>

                    <div class="stock-controls">
                        <div class="bulk-actions">
                            <button id="set-all-stock-btn" class="btn-secondary">Set All Stock</button>
                            <input type="number" id="bulk-stock-input" placeholder="Stock amount" min="0" max="100">
                        </div>
                        <div class="filter-controls">
                            <select id="category-filter">
                                <option value="all">All Categories</option>
                                <option value="PIZZAS">Pizzas</option>
                                <option value="SIDES">Sides</option>
                                <option value="DRINKS">Drinks</option>
                                <option value="DESSERTS">Desserts</option>
                            </select>
                        </div>
                    </div>

                    <div id="stock-items-container" class="stock-items">
                        <!-- Stock items will be loaded here -->
                    </div>
                </div>

                <!-- Time Slots Management Tab -->
                <div id="timeslots-tab" class="tab-content">
                    <div class="section-header">
                        <h2>â° Time Slot Management</h2>
                        <p>Configure delivery time slots and capacity</p>
                    </div>

                    <div class="timeslot-settings">
                        <div class="setting-group">
                            <label for="slot-duration">Time Slot Duration (minutes)</label>
                            <select id="slot-duration">
                                <option value="15">15 minutes</option>
                                <option value="30" selected>30 minutes</option>
                                <option value="45">45 minutes</option>
                                <option value="60">60 minutes</option>
                            </select>
                        </div>

                        <div class="setting-group">
                            <label for="pizzas-per-slot">Maximum Pizzas Per Slot</label>
                            <input type="number" id="pizzas-per-slot" min="1" max="20" value="8">
                        </div>

                        <div class="setting-group">
                            <label for="start-time">Service Start Time</label>
                            <input type="time" id="start-time" value="17:00">
                        </div>

                        <div class="setting-group">
                            <label for="end-time">Service End Time</label>
                            <input type="time" id="end-time" value="22:00">
                        </div>
                    </div>

                    <div class="timeslot-preview">
                        <h3>ğŸ“… Today's Time Slots</h3>
                        <div id="timeslots-container" class="timeslots-grid">
                            <!-- Time slots will be generated here -->
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settings-tab" class="tab-content">
                    <div class="section-header">
                        <h2>âš™ï¸ System Settings</h2>
                        <p>Configure stock management behavior</p>
                    </div>

                    <div class="settings-grid">
                        <div class="setting-card">
                            <h3>ğŸ”” Low Stock Alerts</h3>
                            <div class="setting-group">
                                <label for="low-stock-threshold">Alert when stock below:</label>
                                <input type="number" id="low-stock-threshold" min="0" max="10" value="3">
                            </div>
                            <div class="setting-group">
                                <label>
                                    <input type="checkbox" id="auto-disable-low-stock" checked>
                                    Auto-disable items when out of stock
                                </label>
                            </div>
                        </div>

                        <div class="setting-card">
                            <h3>ğŸ• Auto Reset</h3>
                            <div class="setting-group">
                                <label>
                                    <input type="checkbox" id="auto-reset-daily" checked>
                                    Reset stock daily at midnight
                                </label>
                            </div>
                            <div class="setting-group">
                                <label for="default-stock-amount">Default stock amount:</label>
                                <input type="number" id="default-stock-amount" min="5" max="50" value="20">
                            </div>
                        </div>

                        <div class="setting-card">
                            <h3>ğŸ“Š Reporting</h3>
                            <div class="setting-group">
                                <label>
                                    <input type="checkbox" id="track-stock-history" checked>
                                    Track stock usage history
                                </label>
                            </div>
                            <div class="setting-group">
                                <button id="export-stock-report" class="btn-secondary">ğŸ“ˆ Export Report</button>
                            </div>
                        </div>

                        <div class="setting-card">
                            <h3>ğŸ Dough Management</h3>
                            <div class="setting-group">
                                <label for="dough-available">Total Dough Portions Available:</label>
                                <input type="number" id="dough-available" min="0" max="200" value="50">
                            </div>
                            <div class="setting-group">
                                <label for="dough-used">Dough Portions Used Today:</label>
                                <input type="number" id="dough-used" min="0" readonly>
                            </div>
                            <div class="setting-group">
                                <label for="dough-low-threshold">Low Dough Alert Threshold:</label>
                                <input type="number" id="dough-low-threshold" min="0" max="50" value="10">
                            </div>
                            <div class="setting-group">
                                <button id="reset-dough-stock" class="btn-secondary">ğŸ”„ Reset Dough Count</button>
                                <button id="add-dough-portions" class="btn-primary">â• Add Dough Portions</button>
                            </div>
                            <div class="setting-group">
                                <button id="use-dough-manual" class="btn-secondary">ğŸ“‰ Mark Dough Used</button>
                                <button id="test-pizza-sale" class="btn-secondary">ğŸ• Test Pizza Sale</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions Panel -->
            <div class="quick-actions-panel">
                <h3>ğŸš€ Quick Actions</h3>
                <div class="quick-actions">
                    <button id="emergency-disable-all" class="btn-danger">ğŸš¨ Emergency: Disable All Items</button>
                    <button id="restock-all" class="btn-success">âœ… Restock All Items</button>
                    <button id="view-current-orders" class="btn-primary">ğŸ“‹ View Current Orders</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>Updating stock levels...</p>
        </div>
    </div>

    <script src="admin-stock-management.js"></script>
</body>
</html>